<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸŒ± Ù…Ø­Ù„Ù„ Ø§Ù„ØªØ±Ø¨Ø© Ø§Ù„Ø°ÙƒÙŠ v4 - Ù…Ø¹ Ø§Ù„Ø¨Ø­Ø«</title>
  <style>
    :root {
      --primary: #667eea;
      --secondary: #764ba2;
      --success: #4ade80;
      --danger: #ef4444;
      --warning: #f59e0b;
      --light: #f8f9fa;
      --dark: #222;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    html, body {
      height: 100%;
    }

    body {
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      color: var(--dark);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .header {
      background: white;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .header h1 {
      color: var(--primary);
      font-size: 28px;
    }

    .bridge-btn {
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 50px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .bridge-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
    }

    .bridge-btn.connected {
      background: linear-gradient(135deg, var(--success) 0%, #22c55e 100%);
    }

    .screen {
      background: white;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .screen.hidden {
      display: none;
    }

    .screen h2 {
      color: var(--primary);
      margin-bottom: 25px;
      font-size: 24px;
      text-align: center;
    }

    .screen h3 {
      color: var(--dark);
      margin: 20px 0 15px 0;
      font-size: 18px;
    }

    /* Search Styles */
    .search-container {
      margin: 20px 0;
    }

    .search-input {
      width: 100%;
      padding: 14px 18px;
      border: 2px solid var(--primary);
      border-radius: 10px;
      font-size: 16px;
      transition: all 0.3s ease;
      direction: rtl;
      text-align: right;
    }

    .search-input:focus {
      outline: none;
      border-color: var(--secondary);
      background: #f0f4ff;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .search-results-container {
      margin: 20px 0;
      max-height: 400px;
      overflow-y: auto;
      padding: 15px;
      background: var(--light);
      border-radius: 10px;
      border: 1px solid #e0e0e0;
    }

    .search-results-container::-webkit-scrollbar {
      width: 8px;
    }

    .search-results-container::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 10px;
    }

    .search-results-container::-webkit-scrollbar-thumb {
      background: var(--primary);
      border-radius: 10px;
    }

    .search-result-item {
      background: white;
      padding: 12px 15px;
      margin-bottom: 10px;
      border-radius: 8px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 12px;
      transition: all 0.2s ease;
      border: 2px solid transparent;
    }

    .search-result-item:hover {
      background: #f0f4ff;
      border-color: var(--primary);
      transform: translateX(-5px);
    }

    .search-result-item .emoji {
      font-size: 24px;
    }

    .search-result-item .name {
      flex: 1;
      font-weight: 600;
      color: var(--dark);
    }

    .search-result-item .details {
      font-size: 12px;
      color: #999;
    }

    .no-results {
      text-align: center;
      color: #999;
      padding: 20px;
    }

    .selected-plant-info {
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      color: white;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .selected-plant-info.hidden {
      display: none;
    }

    .plant-header {
      display: flex;
      align-items: center;
      gap: 15px;
      width: 100%;
    }

    .plant-emoji {
      font-size: 40px;
      min-width: 40px;
    }

    .plant-header h3 {
      margin: 0 0 5px 0;
      font-size: 18px;
    }

    .change-plant-btn {
      background: rgba(255, 255, 255, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.5);
      color: white;
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.2s ease;
      margin-top: 8px;
    }

    .change-plant-btn:hover {
      background: rgba(255, 255, 255, 0.5);
    }

    /* Mode Buttons */
    .mode-buttons {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin: 30px 0;
    }

    .mode-btn {
      background: white;
      border: 2px solid var(--primary);
      border-radius: 12px;
      padding: 30px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
    }

    .mode-btn:hover {
      background: #f0f4ff;
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(102, 126, 234, 0.2);
    }

    .mode-btn .icon {
      font-size: 40px;
      display: block;
      margin-bottom: 10px;
    }

    .mode-btn span {
      display: block;
      font-size: 18px;
      font-weight: 600;
      color: var(--primary);
      margin-bottom: 5px;
    }

    .mode-btn small {
      display: block;
      font-size: 13px;
      color: #666;
    }

    /* Input Groups */
    .input-section {
      margin: 25px 0;
    }

    .input-row {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 15px;
      margin-bottom: 15px;
    }

    .input-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .input-group label {
      font-weight: 600;
      font-size: 14px;
      color: var(--dark);
    }

    .input-group input {
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 14px;
      transition: all 0.3s ease;
    }

    .input-group input:focus {
      outline: none;
      border-color: var(--primary);
      background: #f0f4ff;
    }

    /* Button Groups */
    .button-group {
      display: flex;
      gap: 10px;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .primary-btn, .secondary-btn, .back-btn {
      padding: 12px 25px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      font-size: 14px;
      transition: all 0.3s ease;
    }

    .primary-btn {
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      color: white;
      flex: 1;
      min-width: 150px;
    }

    .primary-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
    }

    .secondary-btn {
      background: var(--light);
      color: var(--primary);
      border: 2px solid var(--primary);
    }

    .secondary-btn:hover {
      background: #f0f4ff;
    }

    .back-btn {
      background: var(--light);
      color: var(--dark);
      border: 2px solid #e0e0e0;
      flex: 1;
      min-width: 150px;
    }

    .back-btn:hover {
      background: #e8e8e8;
    }

    /* Results */
    .quality-bar-container {
      background: var(--light);
      padding: 20px;
      border-radius: 10px;
      margin: 20px 0;
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .quality-bar {
      flex: 1;
      height: 30px;
      background: #e0e0e0;
      border-radius: 15px;
      overflow: hidden;
    }

    .quality-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--danger), var(--warning), var(--success));
      transition: width 0.5s ease;
    }

    .plants-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 12px;
      margin: 20px 0;
    }

    .plant-card {
      background: #f0f4ff;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      padding: 15px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .plant-card.suitable {
      background: #dcfce7;
      border-color: var(--success);
    }

    .plant-card.unsuitable {
      background: #fee2e2;
      border-color: var(--danger);
    }

    .plant-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .plant-emoji {
      font-size: 32px;
      display: block;
      margin-bottom: 8px;
    }

    .plant-title {
      font-weight: 600;
      font-size: 13px;
      color: var(--dark);
    }

    .footer {
      text-align: center;
      padding: 15px;
      color: rgba(255, 255, 255, 0.8);
      font-size: 12px;
      margin-top: auto;
    }

    @media (max-width: 768px) {
      .input-row {
        grid-template-columns: 1fr;
      }

      .mode-buttons {
        grid-template-columns: 1fr;
      }

      .header {
        flex-direction: column;
        gap: 15px;
        align-items: flex-start;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <div class="header">
    <h1>ğŸŒ± Ù…Ø­Ù„Ù„ Ø§Ù„ØªØ±Ø¨Ø© Ø§Ù„Ø°ÙƒÙŠ v4</h1>
    <button id="bridgeBtn" class="bridge-btn">ğŸ”´ Ø¬Ø³Ø± ØºÙŠØ± Ù…ØªØµÙ„</button>
  </div>

  <div class="container">
    <!-- Screen 1: Mode Selection -->
    <div id="modeSelectionScreen" class="screen">
      <h2>Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„</h2>
      <div class="mode-buttons">
        <button id="autoModeBtn" class="mode-btn">
          <span class="icon">ğŸ¤–</span>
          <span>Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</span>
          <small>Ø§Ø®ØªØ¨Ø± Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„ØªØ±Ø¨Ø© Ù„Ù„Ù†Ø¨Ø§Øª</small>
        </button>
        <button id="manualModeBtn" class="mode-btn">
          <span class="icon">âœï¸</span>
          <span>Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙŠØ¯ÙˆÙŠ</span>
          <small>Ø§Ø¨Ø­Ø« ÙˆØ§Ø®ØªØ± Ù†Ø¨Ø§Øª Ø«Ù… Ø­Ù„Ù„</small>
        </button>
      </div>
    </div>

    <!-- Screen 2: Auto Analysis -->
    <div id="autoAnalysisScreen" class="screen hidden">
      <h2>ğŸ¤– Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</h2>
      <div class="input-section">
        <div class="input-row">
          <div class="input-group">
            <label>ğŸŒ¡ï¸ Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø© (Â°C)</label>
            <input type="number" id="autoTemp" placeholder="22" step="0.1">
          </div>
          <div class="input-group">
            <label>ğŸ’§ Ø§Ù„Ø±Ø·ÙˆØ¨Ø© (%)</label>
            <input type="number" id="autoMoisture" placeholder="70" step="0.1">
          </div>
          <div class="input-group">
            <label>ğŸ§ª pH</label>
            <input type="number" id="autoPH" placeholder="6.5" step="0.1">
          </div>
        </div>
        <div class="input-row">
          <div class="input-group">
            <label>ğŸŸ¢ Ø§Ù„Ù†ÙŠØªØ±ÙˆØ¬ÙŠÙ†</label>
            <input type="number" id="autoN" placeholder="50" step="1">
          </div>
          <div class="input-group">
            <label>ğŸ”µ Ø§Ù„ÙØ³ÙÙˆØ±</label>
            <input type="number" id="autoP" placeholder="40" step="1">
          </div>
          <div class="input-group">
            <label>ğŸŸ£ Ø§Ù„Ø¨ÙˆØªØ§Ø³ÙŠÙˆÙ…</label>
            <input type="number" id="autoK" placeholder="45" step="1">
          </div>
        </div>
      </div>
      <div class="button-group">
        <button id="autoAnalyzeBtn" class="primary-btn">ğŸ” ØªØ­Ù„ÙŠÙ„</button>
        <button id="autoBackBtn" class="back-btn">Ø±Ø¬ÙˆØ¹</button>
      </div>
    </div>

    <!-- Screen 3a: Manual Search (NEW PAGE 1) -->
    <div id="manualSearchScreen" class="screen hidden">
      <h2>ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù†Ø¨Ø§Øª</h2>
      <div class="search-container">
        <input 
          type="text" 
          id="plantSearchInput" 
          placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù†Ø¨Ø§Øª (Ø·Ù…Ø§Ø·Ù…ØŒ Ø®ÙŠØ§Ø±ØŒ Ø¬Ø²Ø±...)" 
          class="search-input"
        >
      </div>
      <div id="searchResultsContainer" class="search-results-container">
        <p class="no-results">Ø§Ø¨Ø¯Ø£ Ø¨Ø§Ù„ÙƒØªØ§Ø¨Ø© Ù„Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù†Ø¨Ø§Øª...</p>
      </div>
      <div class="button-group">
        <button id="backFromSearchBtn" class="back-btn">Ø±Ø¬ÙˆØ¹</button>
      </div>
    </div>

    <!-- Screen 3b: Manual Analysis (NEW PAGE 2) -->
    <div id="manualAnalysisScreen" class="screen hidden">
      <h2>âœï¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ±Ø¨Ø©</h2>
      
      <div id="selectedPlantInfo" class="selected-plant-info hidden">
        <div class="plant-header">
          <span id="selectedPlantEmoji" class="plant-emoji">ğŸŒ±</span>
          <div>
            <h3 id="selectedPlantName">Ø§Ù„Ù†Ø¨Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±</h3>
            <button id="changePlantBtn" class="change-plant-btn">ğŸ”„ ØºÙŠÙ‘Ø± Ø§Ù„Ù†Ø¨Ø§Øª</button>
          </div>
        </div>
      </div>

      <div class="input-section">
        <h3>ğŸ“Š Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ±Ø¨Ø©</h3>
        <div class="input-row">
          <div class="input-group">
            <label>ğŸŒ¡ï¸ Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø© (Â°C)</label>
            <input type="number" id="manualTemp" placeholder="22" step="0.1">
          </div>
          <div class="input-group">
            <label>ğŸ’§ Ø§Ù„Ø±Ø·ÙˆØ¨Ø© (%)</label>
            <input type="number" id="manualMoisture" placeholder="70" step="0.1">
          </div>
          <div class="input-group">
            <label>ğŸ§ª pH</label>
            <input type="number" id="manualPH" placeholder="6.5" step="0.1">
          </div>
        </div>
        <div class="input-row">
          <div class="input-group">
            <label>ğŸŸ¢ Ø§Ù„Ù†ÙŠØªØ±ÙˆØ¬ÙŠÙ†</label>
            <input type="number" id="manualN" placeholder="50" step="1">
          </div>
          <div class="input-group">
            <label>ğŸ”µ Ø§Ù„ÙØ³ÙÙˆØ±</label>
            <input type="number" id="manualP" placeholder="40" step="1">
          </div>
          <div class="input-group">
            <label>ğŸŸ£ Ø§Ù„Ø¨ÙˆØªØ§Ø³ÙŠÙˆÙ…</label>
            <input type="number" id="manualK" placeholder="45" step="1">
          </div>
        </div>
      </div>

      <div class="button-group">
        <button id="manualAnalyzeBtn" class="primary-btn">ğŸ” ØªØ­Ù„ÙŠÙ„</button>
        <button id="manualBackBtn" class="back-btn">Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø¨Ø­Ø«</button>
      </div>
    </div>

    <!-- Screen 4: Results -->
    <div id="resultsScreen" class="screen hidden">
      <h2>ğŸ“Š Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ­Ù„ÙŠÙ„</h2>
      <div class="quality-bar-container">
        <span>Ø¬ÙˆØ¯Ø© Ø§Ù„ØªØ±Ø¨Ø©:</span>
        <div class="quality-bar">
          <div id="qualityBar" class="quality-fill" style="width: 50%"></div>
        </div>
        <span id="qualityPercent">50%</span>
      </div>
      <div id="resultsContainer"></div>
      <div class="button-group">
        <button id="newAnalysisBtn" class="primary-btn">ØªØ­Ù„ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</button>
      </div>
    </div>
  </div>

  <div class="footer">
    <p>ğŸŒ± Ù…Ø­Ù„Ù„ Ø§Ù„ØªØ±Ø¨Ø© Ø§Ù„Ø°ÙƒÙŠ Â© 2025 | Ø§Ù„Ù†Ø³Ø®Ø© 4 Ù…Ø¹ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…Ø­Ø³Ù‘Ù†</p>
  </div>

  <!-- Scripts -->
  <script src="plants-advanced.js"></script>
  <script src="ai-advanced.js"></script>
  <script>
    // Multi-language translations (10 languages)
    const translations = {
      ar: {
        title: 'ğŸŒ± Ù…Ø­Ù„Ù„ Ø§Ù„ØªØ±Ø¨Ø© Ø§Ù„Ø°ÙƒÙŠ v4',
        disconnect: 'ğŸ”´ Ø¬Ø³Ø± ØºÙŠØ± Ù…ØªØµÙ„',
        connect: 'ğŸŸ¢ Ø¬Ø³Ø± Ù…ØªØµÙ„',
        selectMode: 'Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„',
        autoMode: 'Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ',
        autoModeDesc: 'Ø§Ø®ØªØ¨Ø± Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„ØªØ±Ø¨Ø© Ù„Ù„Ù†Ø¨Ø§Øª',
        manualMode: 'Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙŠØ¯ÙˆÙŠ',
        manualModeDesc: 'Ø§Ø¨Ø­Ø« ÙˆØ§Ø®ØªØ± Ù†Ø¨Ø§Øª Ø«Ù… Ø­Ù„Ù„',
        autoAnalysis: 'ğŸ¤– Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ',
        search: 'ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù†Ø¨Ø§Øª',
        searchPlaceholder: 'Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù†Ø¨Ø§Øª (Ø·Ù…Ø§Ø·Ù…ØŒ Ø®ÙŠØ§Ø±ØŒ Ø¬Ø²Ø±...)',
        startTyping: 'Ø§Ø¨Ø¯Ø£ Ø¨Ø§Ù„ÙƒØªØ§Ø¨Ø© Ù„Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù†Ø¨Ø§Øª...',
        noResults: 'âŒ Ù„Ù… Ù†Ø¬Ø¯ Ù†Ø¨Ø§Øª ÙŠØ·Ø§Ø¨Ù‚ Ø§Ù„Ø¨Ø­Ø«',
        soilData: 'âœï¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ±Ø¨Ø©',
        enterSoilData: 'ğŸ“Š Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ±Ø¨Ø©',
        temperature: 'ğŸŒ¡ï¸ Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø© (Â°C)',
        moisture: 'ğŸ’§ Ø§Ù„Ø±Ø·ÙˆØ¨Ø© (%)',
        ph: 'ğŸ§ª pH',
        nitrogen: 'ğŸŸ¢ Ø§Ù„Ù†ÙŠØªØ±ÙˆØ¬ÙŠÙ†',
        phosphorus: 'ğŸ”µ Ø§Ù„ÙØ³ÙÙˆØ±',
        potassium: 'ğŸŸ£ Ø§Ù„Ø¨ÙˆØªØ§Ø³ÙŠÙˆÙ…',
        analyze: 'ğŸ” ØªØ­Ù„ÙŠÙ„',
        back: 'Ø±Ø¬ÙˆØ¹',
        backSearch: 'Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø¨Ø­Ø«',
        changePlant: 'ğŸ”„ ØºÙŠÙ‘Ø± Ø§Ù„Ù†Ø¨Ø§Øª',
        results: 'ğŸ“Š Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ­Ù„ÙŠÙ„',
        soilQuality: 'Ø¬ÙˆØ¯Ø© Ø§Ù„ØªØ±Ø¨Ø©:',
        suitablePlants: 'âœ… Ø§Ù„Ù†Ø¨Ø§ØªØ§Øª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©',
        solutions: 'ğŸ’¡ Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©',
        compatibility: 'Ø¯Ø±Ø¬Ø© Ø§Ù„ØªÙˆØ§ÙÙ‚:',
        newAnalysis: 'ØªØ­Ù„ÙŠÙ„ Ø¬Ø¯ÙŠØ¯',
        warning: 'âš ï¸ ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„',
        selectPlant: 'âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù†Ø¨Ø§Øª Ø£ÙˆÙ„Ø§Ù‹',
        footer: 'ğŸŒ± Ù…Ø­Ù„Ù„ Ø§Ù„ØªØ±Ø¨Ø© Ø§Ù„Ø°ÙƒÙŠ Â© 2025 | Ø§Ù„Ù†Ø³Ø®Ø© 4 Ù…Ø¹ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…Ø­Ø³Ù‘Ù†'
      },
      en: {
        title: 'ğŸŒ± Smart Soil Analyzer v4',
        disconnect: 'ğŸ”´ Bridge Disconnected',
        connect: 'ğŸŸ¢ Bridge Connected',
        selectMode: 'Select Analysis Mode',
        autoMode: 'Automatic Mode',
        autoModeDesc: 'Test soil suitability for plants',
        manualMode: 'Manual Mode',
        manualModeDesc: 'Search and select a plant then analyze',
        autoAnalysis: 'ğŸ¤– Automatic Mode',
        search: 'ğŸ” Search for Plant',
        searchPlaceholder: 'Type plant name (tomato, cucumber, carrot...)',
        startTyping: 'Start typing to search for plants...',
        noResults: 'âŒ No plants found matching your search',
        soilData: 'âœï¸ Soil Data',
        enterSoilData: 'ğŸ“Š Enter Soil Data',
        temperature: 'ğŸŒ¡ï¸ Temperature (Â°C)',
        moisture: 'ğŸ’§ Moisture (%)',
        ph: 'ğŸ§ª pH',
        nitrogen: 'ğŸŸ¢ Nitrogen',
        phosphorus: 'ğŸ”µ Phosphorus',
        potassium: 'ğŸŸ£ Potassium',
        analyze: 'ğŸ” Analyze',
        back: 'Back',
        backSearch: 'Back to Search',
        changePlant: 'ğŸ”„ Change Plant',
        results: 'ğŸ“Š Analysis Results',
        soilQuality: 'Soil Quality:',
        suitablePlants: 'âœ… Suitable Plants',
        solutions: 'ğŸ’¡ Recommended Solutions',
        compatibility: 'Compatibility:',
        newAnalysis: 'New Analysis',
        warning: 'âš ï¸ Please fill in all fields',
        selectPlant: 'âš ï¸ Please select a plant first',
        footer: 'ğŸŒ± Smart Soil Analyzer Â© 2025 | Version 4 with Enhanced Search'
      },
      fr: {
        title: 'ğŸŒ± Analyseur de Sol Intelligent v4',
        disconnect: 'ğŸ”´ Pont DÃ©connectÃ©',
        connect: 'ğŸŸ¢ Pont ConnectÃ©',
        selectMode: 'SÃ©lectionner le Mode',
        autoMode: 'Mode Automatique',
        autoModeDesc: 'Testez la convenance du sol',
        manualMode: 'Mode Manuel',
        manualModeDesc: 'Recherchez et sÃ©lectionnez une plante',
        autoAnalysis: 'ğŸ¤– Mode Automatique',
        search: 'ğŸ” Rechercher une Plante',
        searchPlaceholder: 'Tapez un nom de plante...',
        startTyping: 'Commencez Ã  taper pour rechercher...',
        noResults: 'âŒ Aucune plante trouvÃ©e',
        soilData: 'âœï¸ DonnÃ©es du Sol',
        enterSoilData: 'ğŸ“Š Entrez les DonnÃ©es',
        temperature: 'ğŸŒ¡ï¸ TempÃ©rature (Â°C)',
        moisture: 'ğŸ’§ HumiditÃ© (%)',
        ph: 'ğŸ§ª pH',
        nitrogen: 'ğŸŸ¢ Azote',
        phosphorus: 'ğŸ”µ Phosphore',
        potassium: 'ğŸŸ£ Potassium',
        analyze: 'ğŸ” Analyser',
        back: 'Retour',
        backSearch: 'Retour Ã  la Recherche',
        changePlant: 'ğŸ”„ Changer Plante',
        results: 'ğŸ“Š RÃ©sultats',
        soilQuality: 'QualitÃ© du Sol:',
        suitablePlants: 'âœ… Plantes AdaptÃ©es',
        solutions: 'ğŸ’¡ Solutions ProposÃ©es',
        compatibility: 'CompatibilitÃ©:',
        newAnalysis: 'Nouvelle Analyse',
        warning: 'âš ï¸ Veuillez remplir tous les champs',
        selectPlant: 'âš ï¸ Veuillez sÃ©lectionner une plante',
        footer: 'ğŸŒ± Analyseur de Sol Â© 2025 | Version 4'
      },
      es: {
        title: 'ğŸŒ± Analizador de Suelo Inteligente v4',
        disconnect: 'ğŸ”´ Puente Desconectado',
        connect: 'ğŸŸ¢ Puente Conectado',
        selectMode: 'Seleccionar Modo',
        autoMode: 'Modo AutomÃ¡tico',
        autoModeDesc: 'Pruebe la idoneidad del suelo',
        manualMode: 'Modo Manual',
        manualModeDesc: 'Busque y seleccione una planta',
        autoAnalysis: 'ğŸ¤– Modo AutomÃ¡tico',
        search: 'ğŸ” Buscar Planta',
        searchPlaceholder: 'Escriba nombre de planta...',
        startTyping: 'Comience a escribir para buscar...',
        noResults: 'âŒ No se encontraron plantas',
        soilData: 'âœï¸ Datos del Suelo',
        enterSoilData: 'ğŸ“Š Ingrese Datos',
        temperature: 'ğŸŒ¡ï¸ Temperatura (Â°C)',
        moisture: 'ğŸ’§ Humedad (%)',
        ph: 'ğŸ§ª pH',
        nitrogen: 'ğŸŸ¢ NitrÃ³geno',
        phosphorus: 'ğŸ”µ FÃ³sforo',
        potassium: 'ğŸŸ£ Potasio',
        analyze: 'ğŸ” Analizar',
        back: 'AtrÃ¡s',
        backSearch: 'Volver a Buscar',
        changePlant: 'ğŸ”„ Cambiar Planta',
        results: 'ğŸ“Š Resultados',
        soilQuality: 'Calidad del Suelo:',
        suitablePlants: 'âœ… Plantas Adecuadas',
        solutions: 'ğŸ’¡ Soluciones Propuestas',
        compatibility: 'Compatibilidad:',
        newAnalysis: 'Nuevo AnÃ¡lisis',
        warning: 'âš ï¸ Complete todos los campos',
        selectPlant: 'âš ï¸ Seleccione una planta',
        footer: 'ğŸŒ± Analizador de Suelo Â© 2025 | VersiÃ³n 4'
      },
      de: {
        title: 'ğŸŒ± Intelligenter Bodenanalysator v4',
        disconnect: 'ğŸ”´ BrÃ¼cke Getrennt',
        connect: 'ğŸŸ¢ BrÃ¼cke Verbunden',
        selectMode: 'Modus WÃ¤hlen',
        autoMode: 'Automatischer Modus',
        autoModeDesc: 'Testen Sie die Bodeneignung',
        manualMode: 'Manueller Modus',
        manualModeDesc: 'Suchen und wÃ¤hlen Sie eine Pflanze',
        autoAnalysis: 'ğŸ¤– Automatischer Modus',
        search: 'ğŸ” Pflanze Suchen',
        searchPlaceholder: 'Geben Sie Pflanzennamen ein...',
        startTyping: 'Beginnen Sie zu tippen, um zu suchen...',
        noResults: 'âŒ Keine Pflanzen gefunden',
        soilData: 'âœï¸ Bodendaten',
        enterSoilData: 'ğŸ“Š Daten Eingeben',
        temperature: 'ğŸŒ¡ï¸ Temperatur (Â°C)',
        moisture: 'ğŸ’§ Feuchte (%)',
        ph: 'ğŸ§ª pH',
        nitrogen: 'ğŸŸ¢ Stickstoff',
        phosphorus: 'ğŸ”µ Phosphor',
        potassium: 'ğŸŸ£ Kalium',
        analyze: 'ğŸ” Analysieren',
        back: 'ZurÃ¼ck',
        backSearch: 'ZurÃ¼ck zur Suche',
        changePlant: 'ğŸ”„ Pflanze Ã„ndern',
        results: 'ğŸ“Š Ergebnisse',
        soilQuality: 'BodenqualitÃ¤t:',
        suitablePlants: 'âœ… Geeignete Pflanzen',
        solutions: 'ğŸ’¡ Vorgeschlagene LÃ¶sungen',
        compatibility: 'KompatibilitÃ¤t:',
        newAnalysis: 'Neue Analyse',
        warning: 'âš ï¸ Bitte fÃ¼llen Sie alle Felder aus',
        selectPlant: 'âš ï¸ Bitte wÃ¤hlen Sie eine Pflanze',
        footer: 'ğŸŒ± Bodenanalysator Â© 2025 | Version 4'
      },
      zh: {
        title: 'ğŸŒ± æ™ºèƒ½åœŸå£¤åˆ†æä»ª v4',
        disconnect: 'ğŸ”´ æ¡¥æ¥å™¨å·²æ–­å¼€',
        connect: 'ğŸŸ¢ æ¡¥æ¥å™¨å·²è¿æ¥',
        selectMode: 'é€‰æ‹©åˆ†ææ¨¡å¼',
        autoMode: 'è‡ªåŠ¨æ¨¡å¼',
        autoModeDesc: 'æµ‹è¯•åœŸå£¤é€‚å®œæ€§',
        manualMode: 'æ‰‹åŠ¨æ¨¡å¼',
        manualModeDesc: 'æœç´¢å¹¶é€‰æ‹©æ¤ç‰©',
        autoAnalysis: 'ğŸ¤– è‡ªåŠ¨æ¨¡å¼',
        search: 'ğŸ” æœç´¢æ¤ç‰©',
        searchPlaceholder: 'è¾“å…¥æ¤ç‰©åç§°...',
        startTyping: 'å¼€å§‹è¾“å…¥ä»¥æœç´¢...',
        noResults: 'âŒ æœªæ‰¾åˆ°æ¤ç‰©',
        soilData: 'âœï¸ åœŸå£¤æ•°æ®',
        enterSoilData: 'ğŸ“Š è¾“å…¥æ•°æ®',
        temperature: 'ğŸŒ¡ï¸ æ¸©åº¦ (Â°C)',
        moisture: 'ğŸ’§ æ¹¿åº¦ (%)',
        ph: 'ğŸ§ª pH',
        nitrogen: 'ğŸŸ¢ æ°®æ°”',
        phosphorus: 'ğŸ”µ ç£·',
        potassium: 'ğŸŸ£ é’¾',
        analyze: 'ğŸ” åˆ†æ',
        back: 'è¿”å›',
        backSearch: 'è¿”å›æœç´¢',
        changePlant: 'ğŸ”„ æ›´æ”¹æ¤ç‰©',
        results: 'ğŸ“Š ç»“æœ',
        soilQuality: 'åœŸå£¤è´¨é‡:',
        suitablePlants: 'âœ… é€‚åˆçš„æ¤ç‰©',
        solutions: 'ğŸ’¡ å»ºè®®çš„è§£å†³æ–¹æ¡ˆ',
        compatibility: 'å…¼å®¹æ€§:',
        newAnalysis: 'æ–°åˆ†æ',
        warning: 'âš ï¸ è¯·å¡«å†™æ‰€æœ‰å­—æ®µ',
        selectPlant: 'âš ï¸ è¯·é€‰æ‹©æ¤ç‰©',
        footer: 'ğŸŒ± åœŸå£¤åˆ†æä»ª Â© 2025 | ç‰ˆæœ¬ 4'
      },
      ja: {
        title: 'ğŸŒ± ã‚¹ãƒãƒ¼ãƒˆåœŸå£Œåˆ†æè£…ç½® v4',
        disconnect: 'ğŸ”´ ãƒ–ãƒªãƒƒã‚¸åˆ‡æ–­',
        connect: 'ğŸŸ¢ ãƒ–ãƒªãƒƒã‚¸æ¥ç¶š',
        selectMode: 'åˆ†æãƒ¢ãƒ¼ãƒ‰ã‚’é¸æŠ',
        autoMode: 'è‡ªå‹•ãƒ¢ãƒ¼ãƒ‰',
        autoModeDesc: 'åœŸå£Œé©æ€§ã‚’ãƒ†ã‚¹ãƒˆ',
        manualMode: 'æ‰‹å‹•ãƒ¢ãƒ¼ãƒ‰',
        manualModeDesc: 'æ¤ç‰©ã‚’æ¤œç´¢ã—ã¦é¸æŠ',
        autoAnalysis: 'ğŸ¤– è‡ªå‹•ãƒ¢ãƒ¼ãƒ‰',
        search: 'ğŸ” æ¤ç‰©ã‚’æ¤œç´¢',
        searchPlaceholder: 'æ¤ç‰©åã‚’å…¥åŠ›...',
        startTyping: 'å…¥åŠ›ã‚’å§‹ã‚ã¦æ¤œç´¢...',
        noResults: 'âŒ æ¤ç‰©ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“',
        soilData: 'âœï¸ åœŸå£Œãƒ‡ãƒ¼ã‚¿',
        enterSoilData: 'ğŸ“Š ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›',
        temperature: 'ğŸŒ¡ï¸ æ¸©åº¦ (Â°C)',
        moisture: 'ğŸ’§ æ¹¿åº¦ (%)',
        ph: 'ğŸ§ª pH',
        nitrogen: 'ğŸŸ¢ çª’ç´ ',
        phosphorus: 'ğŸ”µ ãƒªãƒ³',
        potassium: 'ğŸŸ£ ã‚«ãƒªã‚¦ãƒ ',
        analyze: 'ğŸ” åˆ†æ',
        back: 'æˆ»ã‚‹',
        backSearch: 'æ¤œç´¢ã«æˆ»ã‚‹',
        changePlant: 'ğŸ”„ æ¤ç‰©ã‚’å¤‰æ›´',
        results: 'ğŸ“Š çµæœ',
        soilQuality: 'åœŸå£Œå“è³ª:',
        suitablePlants: 'âœ… é©ã—ãŸæ¤ç‰©',
        solutions: 'ğŸ’¡ æ¨å¥¨ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³',
        compatibility: 'äº’æ›æ€§:',
        newAnalysis: 'æ–°è¦åˆ†æ',
        warning: 'âš ï¸ ã™ã¹ã¦ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«å…¥åŠ›ã—ã¦ãã ã•ã„',
        selectPlant: 'âš ï¸ æ¤ç‰©ã‚’é¸æŠã—ã¦ãã ã•ã„',
        footer: 'ğŸŒ± åœŸå£Œåˆ†æè£…ç½® Â© 2025 | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 4'
      },
      hi: {
        title: 'ğŸŒ± à¤¸à¥à¤®à¤¾à¤°à¥à¤Ÿ à¤®à¤¿à¤Ÿà¥à¤Ÿà¥€ à¤µà¤¿à¤¶à¥à¤²à¥‡à¤·à¤• v4',
        disconnect: 'ğŸ”´ à¤¬à¥à¤°à¤¿à¤œ à¤¡à¤¿à¤¸à¥à¤•à¤¨à¥‡à¤•à¥à¤Ÿ',
        connect: 'ğŸŸ¢ à¤¬à¥à¤°à¤¿à¤œ à¤•à¤¨à¥‡à¤•à¥à¤Ÿ',
        selectMode: 'à¤µà¤¿à¤¶à¥à¤²à¥‡à¤·à¤£ à¤®à¥‹à¤¡ à¤šà¥à¤¨à¥‡à¤‚',
        autoMode: 'à¤¸à¥à¤µà¤šà¤¾à¤²à¤¿à¤¤ à¤®à¥‹à¤¡',
        autoModeDesc: 'à¤®à¤¿à¤Ÿà¥à¤Ÿà¥€ à¤•à¥€ à¤‰à¤ªà¤¯à¥à¤•à¥à¤¤à¤¤à¤¾ à¤•à¤¾ à¤ªà¤°à¥€à¤•à¥à¤·à¤£ à¤•à¤°à¥‡à¤‚',
        manualMode: 'à¤®à¥ˆà¤¨à¥à¤…à¤² à¤®à¥‹à¤¡',
        manualModeDesc: 'à¤ªà¥Œà¤§à¥‡ à¤–à¥‹à¤œà¥‡à¤‚ à¤”à¤° à¤šà¥à¤¨à¥‡à¤‚',
        autoAnalysis: 'ğŸ¤– à¤¸à¥à¤µà¤šà¤¾à¤²à¤¿à¤¤ à¤®à¥‹à¤¡',
        search: 'ğŸ” à¤ªà¥Œà¤§à¥‡ à¤–à¥‹à¤œà¥‡à¤‚',
        searchPlaceholder: 'à¤ªà¥Œà¤§à¥‡ à¤•à¤¾ à¤¨à¤¾à¤® à¤Ÿà¤¾à¤‡à¤ª à¤•à¤°à¥‡à¤‚...',
        startTyping: 'à¤–à¥‹à¤œà¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤Ÿà¤¾à¤‡à¤ª à¤•à¤°à¤¨à¤¾ à¤¶à¥à¤°à¥‚ à¤•à¤°à¥‡à¤‚...',
        noResults: 'âŒ à¤•à¥‹à¤ˆ à¤ªà¥Œà¤§à¥‡ à¤¨à¤¹à¥€à¤‚ à¤®à¤¿à¤²à¥‡',
        soilData: 'âœï¸ à¤®à¤¿à¤Ÿà¥à¤Ÿà¥€ à¤¡à¥‡à¤Ÿà¤¾',
        enterSoilData: 'ğŸ“Š à¤¡à¥‡à¤Ÿà¤¾ à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚',
        temperature: 'ğŸŒ¡ï¸ à¤¤à¤¾à¤ªà¤®à¤¾à¤¨ (Â°C)',
        moisture: 'ğŸ’§ à¤¨à¤®à¥€ (%)',
        ph: 'ğŸ§ª pH',
        nitrogen: 'ğŸŸ¢ à¤¨à¤¾à¤‡à¤Ÿà¥à¤°à¥‹à¤œà¤¨',
        phosphorus: 'ğŸ”µ à¤«à¤¾à¤¸à¥à¤«à¥‹à¤°à¤¸',
        potassium: 'ğŸŸ£ à¤ªà¥‹à¤Ÿà¥‡à¤¶à¤¿à¤¯à¤®',
        analyze: 'ğŸ” à¤µà¤¿à¤¶à¥à¤²à¥‡à¤·à¤£',
        back: 'à¤µà¤¾à¤ªà¤¸',
        backSearch: 'à¤–à¥‹à¤œ à¤ªà¤° à¤²à¥Œà¤Ÿà¥‡à¤‚',
        changePlant: 'ğŸ”„ à¤ªà¥Œà¤§à¤¾ à¤¬à¤¦à¤²à¥‡à¤‚',
        results: 'ğŸ“Š à¤ªà¤°à¤¿à¤£à¤¾à¤®',
        soilQuality: 'à¤®à¤¿à¤Ÿà¥à¤Ÿà¥€ à¤•à¥€ à¤—à¥à¤£à¤µà¤¤à¥à¤¤à¤¾:',
        suitablePlants: 'âœ… à¤‰à¤ªà¤¯à¥à¤•à¥à¤¤ à¤ªà¥Œà¤§à¥‡',
        solutions: 'ğŸ’¡ à¤¸à¥à¤à¤¾à¤ à¤—à¤ à¤¸à¤®à¤¾à¤§à¤¾à¤¨',
        compatibility: 'à¤¸à¤‚à¤—à¤¤à¤¤à¤¾:',
        newAnalysis: 'à¤¨à¤¯à¤¾ à¤µà¤¿à¤¶à¥à¤²à¥‡à¤·à¤£',
        warning: 'âš ï¸ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤¸à¤­à¥€ à¤«à¤¼à¥€à¤²à¥à¤¡ à¤­à¤°à¥‡à¤‚',
        selectPlant: 'âš ï¸ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤à¤• à¤ªà¥Œà¤§à¤¾ à¤šà¥à¤¨à¥‡à¤‚',
        footer: 'ğŸŒ± à¤®à¤¿à¤Ÿà¥à¤Ÿà¥€ à¤µà¤¿à¤¶à¥à¤²à¥‡à¤·à¤• Â© 2025 | à¤¸à¤‚à¤¸à¥à¤•à¤°à¤£ 4'
      },
      tr: {
        title: 'ğŸŒ± AkÄ±llÄ± Toprak AnalizÃ¶rÃ¼ v4',
        disconnect: 'ğŸ”´ KÃ¶prÃ¼ BaÄŸlantÄ±sÄ± Kesildi',
        connect: 'ğŸŸ¢ KÃ¶prÃ¼ BaÄŸlÄ±',
        selectMode: 'Analiz Modunu SeÃ§in',
        autoMode: 'Otomatik Mod',
        autoModeDesc: 'TopraÄŸÄ±n uygunluÄŸunu test edin',
        manualMode: 'Manuel Mod',
        manualModeDesc: 'Bitki arayÄ±n ve seÃ§in',
        autoAnalysis: 'ğŸ¤– Otomatik Mod',
        search: 'ğŸ” Bitki ArayÄ±n',
        searchPlaceholder: 'Bitki adÄ± yazÄ±n...',
        startTyping: 'Aramak iÃ§in yazÄ±n...',
        noResults: 'âŒ Bitki bulunamadÄ±',
        soilData: 'âœï¸ Toprak Verileri',
        enterSoilData: 'ğŸ“Š Veri Girin',
        temperature: 'ğŸŒ¡ï¸ SÄ±caklÄ±k (Â°C)',
        moisture: 'ğŸ’§ Nem (%)',
        ph: 'ğŸ§ª pH',
        nitrogen: 'ğŸŸ¢ Azot',
        phosphorus: 'ğŸ”µ Fosfor',
        potassium: 'ğŸŸ£ Potasyum',
        analyze: 'ğŸ” Analiz Et',
        back: 'Geri',
        backSearch: 'Aramaya Geri DÃ¶n',
        changePlant: 'ğŸ”„ Bitki DeÄŸiÅŸtir',
        results: 'ğŸ“Š SonuÃ§lar',
        soilQuality: 'Toprak Kalitesi:',
        suitablePlants: 'âœ… Uygun Bitkiler',
        solutions: 'ğŸ’¡ Ã–nerilen Ã‡Ã¶zÃ¼mler',
        compatibility: 'Uyumluluk:',
        newAnalysis: 'Yeni Analiz',
        warning: 'âš ï¸ LÃ¼tfen tÃ¼m alanlarÄ± doldurun',
        selectPlant: 'âš ï¸ LÃ¼tfen bir bitki seÃ§in',
        footer: 'ğŸŒ± Toprak AnalizÃ¶rÃ¼ Â© 2025 | SÃ¼rÃ¼m 4'
      },
      pt: {
        title: 'ğŸŒ± Analisador de Solo Inteligente v4',
        disconnect: 'ğŸ”´ Ponte Desconectada',
        connect: 'ğŸŸ¢ Ponte Conectada',
        selectMode: 'Selecione o Modo',
        autoMode: 'Modo AutomÃ¡tico',
        autoModeDesc: 'Teste a adequaÃ§Ã£o do solo',
        manualMode: 'Modo Manual',
        manualModeDesc: 'Pesquise e selecione uma planta',
        autoAnalysis: 'ğŸ¤– Modo AutomÃ¡tico',
        search: 'ğŸ” Pesquisar Planta',
        searchPlaceholder: 'Digite o nome da planta...',
        startTyping: 'Comece a digitar para pesquisar...',
        noResults: 'âŒ Nenhuma planta encontrada',
        soilData: 'âœï¸ Dados do Solo',
        enterSoilData: 'ğŸ“Š Insira Dados',
        temperature: 'ğŸŒ¡ï¸ Temperatura (Â°C)',
        moisture: 'ğŸ’§ Umidade (%)',
        ph: 'ğŸ§ª pH',
        nitrogen: 'ğŸŸ¢ NitrogÃªnio',
        phosphorus: 'ğŸ”µ FÃ³sforo',
        potassium: 'ğŸŸ£ PotÃ¡ssio',
        analyze: 'ğŸ” Analisar',
        back: 'Voltar',
        backSearch: 'Voltar Ã  Pesquisa',
        changePlant: 'ğŸ”„ Mudar Planta',
        results: 'ğŸ“Š Resultados',
        soilQuality: 'Qualidade do Solo:',
        suitablePlants: 'âœ… Plantas Adequadas',
        solutions: 'ğŸ’¡ SoluÃ§Ãµes Propostas',
        compatibility: 'Compatibilidade:',
        newAnalysis: 'Nova AnÃ¡lise',
        warning: 'âš ï¸ Preencha todos os campos',
        selectPlant: 'âš ï¸ Selecione uma planta',
        footer: 'ğŸŒ± Analisador de Solo Â© 2025 | VersÃ£o 4'
      }
    };

    let currentLanguage = 'ar';

    // Function to update text
    function updateText() {
      const t = translations[currentLanguage];
      document.querySelector('.header h1').textContent = t.title;
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (t[key]) el.textContent = t[key];
      });
    }

    // Language selector
    function createLanguageSelector() {
      const header = document.querySelector('.header');
      const langBtn = document.createElement('div');
      langBtn.style.cssText = 'display:flex; gap:5px; flex-wrap:wrap;';
      
      Object.keys(translations).forEach(lang => {
        const btn = document.createElement('button');
        btn.textContent = lang.toUpperCase();
        btn.style.cssText = `
          padding: 6px 10px;
          border: 2px solid ${lang === currentLanguage ? '#667eea' : '#e0e0e0'};
          background: ${lang === currentLanguage ? '#f0f4ff' : 'white'};
          border-radius: 6px;
          cursor: pointer;
          font-weight: ${lang === currentLanguage ? 'bold' : 'normal'};
          transition: all 0.3s;
        `;
        btn.onclick = () => {
          currentLanguage = lang;
          document.documentElement.lang = lang;
          document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
          updateText();
          createLanguageSelector();
        };
        langBtn.appendChild(btn);
      });
      
      const existing = header.querySelector('[data-lang-selector]');
      if (existing) existing.remove();
      langBtn.setAttribute('data-lang-selector', 'true');
      header.appendChild(langBtn);
    }

    // Global state
    let currentSelectedPlant = null;

    // Hide all screens
    function hideAllScreens() {
      document.querySelectorAll('.screen').forEach(screen => {
        screen.classList.add('hidden');
      });
    }

    // Update bridge button text
    function updateBridgeStatus(connected) {
      const t = translations[currentLanguage];
      const bridgeBtn = document.getElementById('bridgeBtn');
      if (connected) {
        bridgeBtn.classList.add('connected');
        bridgeBtn.textContent = t.connect;
      } else {
        bridgeBtn.classList.remove('connected');
        bridgeBtn.textContent = t.disconnect;
      }
    }

    // Switch to auto mode
    function switchToAutoMode() {
      hideAllScreens();
      document.getElementById('modeSelectionScreen').classList.remove('hidden');
      document.getElementById('autoAnalysisScreen').classList.remove('hidden');
    }

    // Switch to manual search (PAGE 1)
    function switchToManualSearch() {
      hideAllScreens();
      document.getElementById('modeSelectionScreen').classList.remove('hidden');
      document.getElementById('manualSearchScreen').classList.remove('hidden');
      document.getElementById('plantSearchInput').focus();
      document.getElementById('searchResultsContainer').innerHTML = '<p class="no-results">Ø§Ø¨Ø¯Ø£ Ø¨Ø§Ù„ÙƒØªØ§Ø¨Ø© Ù„Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù†Ø¨Ø§Øª...</p>';
    }

    // Handle plant search
    function handlePlantSearch(e) {
      const t = translations[currentLanguage];
      const query = e.target.value.toLowerCase().trim();
      const resultsContainer = document.getElementById('searchResultsContainer');
      
      if (!query) {
        resultsContainer.innerHTML = `<p class="no-results">${t.startTyping}</p>`;
        return;
      }

      const results = plantsDB.plants.filter(plant =>
        plant.nameAr.toLowerCase().includes(query) ||
        (plant.nameEn && plant.nameEn.toLowerCase().includes(query))
      ).slice(0, 20);

      if (results.length === 0) {
        resultsContainer.innerHTML = `<p class="no-results">${t.noResults}</p>`;
        return;
      }

      resultsContainer.innerHTML = results.map(plant => `
        <div class="search-result-item" onclick="selectPlantFromSearch(${plant.id})">
          <span class="emoji">${plant.emoji}</span>
          <div class="name">${plant.nameAr}</div>
          <div class="details">T: ${plant.tempMin}Â°-${plant.tempMax}Â°</div>
        </div>
      `).join('');
    }

    // Select plant from search (GO TO PAGE 2)
    function selectPlantFromSearch(plantId) {
      currentSelectedPlant = plantsDB.plants.find(p => p.id === plantId);
      if (!currentSelectedPlant) return;

      document.getElementById('selectedPlantInfo').classList.remove('hidden');
      document.getElementById('selectedPlantEmoji').textContent = currentSelectedPlant.emoji;
      document.getElementById('selectedPlantName').textContent = currentSelectedPlant.nameAr;

      hideAllScreens();
      document.getElementById('modeSelectionScreen').classList.remove('hidden');
      document.getElementById('manualAnalysisScreen').classList.remove('hidden');
    }

    // Auto analysis
    function performAutoAnalysis() {
      const data = {
        temp: parseFloat(document.getElementById('autoTemp').value),
        moisture: parseFloat(document.getElementById('autoMoisture').value),
        ph: parseFloat(document.getElementById('autoPH').value),
        n: parseFloat(document.getElementById('autoN').value),
        p: parseFloat(document.getElementById('autoP').value),
        k: parseFloat(document.getElementById('autoK').value)
      };

      if (Object.values(data).some(isNaN)) {
        alert('âš ï¸ ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„');
        return;
      }

      const suitable = plantsDB.plants.filter(plant =>
        data.temp >= plant.tempMin && data.temp <= plant.tempMax &&
        data.moisture >= plant.moistureMin && data.moisture <= plant.moistureMax &&
        data.ph >= plant.phMin && data.ph <= plant.phMax &&
        data.n >= plant.nMin && data.p >= plant.pMin && data.k >= plant.kMin
      );

      displayResults(suitable, data);
    }

    // Manual analysis
    function performManualAnalysis() {
      if (!currentSelectedPlant) {
        alert('âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù†Ø¨Ø§Øª Ø£ÙˆÙ„Ø§Ù‹');
        return;
      }

      const data = {
        temp: parseFloat(document.getElementById('manualTemp').value),
        moisture: parseFloat(document.getElementById('manualMoisture').value),
        ph: parseFloat(document.getElementById('manualPH').value),
        n: parseFloat(document.getElementById('manualN').value),
        p: parseFloat(document.getElementById('manualP').value),
        k: parseFloat(document.getElementById('manualK').value)
      };

      if (Object.values(data).some(isNaN)) {
        alert('âš ï¸ ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„');
        return;
      }

      const analysis = aiAnalyzer.analyze(currentSelectedPlant, data);
      displayManualResults(currentSelectedPlant, data, analysis);
    }

    // Display results
    function displayResults(plants, data) {
      const quality = Math.min(100, (data.n + data.p + data.k) / 3);
      document.getElementById('qualityBar').style.width = quality + '%';
      document.getElementById('qualityPercent').textContent = Math.round(quality) + '%';

      let html = `<h3>âœ… Ø§Ù„Ù†Ø¨Ø§ØªØ§Øª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© (${plants.length})</h3>
        <div class="plants-grid">`;
      
      plants.slice(0, 12).forEach(plant => {
        html += `
          <div class="plant-card suitable">
            <span class="plant-emoji">${plant.emoji}</span>
            <span class="plant-title">${plant.nameAr}</span>
          </div>`;
      });

      html += '</div>';
      document.getElementById('resultsContainer').innerHTML = html;

      hideAllScreens();
      document.getElementById('resultsScreen').classList.remove('hidden');
    }

    // Display manual results
    function displayManualResults(plant, data, analysis) {
      const quality = Math.max(0, analysis.score || 75);
      document.getElementById('qualityBar').style.width = quality + '%';
      document.getElementById('qualityPercent').textContent = Math.round(quality) + '%';

      let html = `<h3>ğŸŒ¿ Ø§Ù„Ù†Ø¨Ø§Øª: ${plant.nameAr}</h3>
        <p>âœ… Ø¯Ø±Ø¬Ø© Ø§Ù„ØªÙˆØ§ÙÙ‚: ${Math.round(quality)}%</p>`;

      if (analysis.solutions && analysis.solutions.length > 0) {
        html += '<h3>ğŸ’¡ Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©</h3>';
        html += '<div class="plants-grid">';
        analysis.solutions.forEach(sol => {
          html += `<div class="plant-card"><strong>${sol.solution}</strong><br>${sol.amount}g</div>`;
        });
        html += '</div>';
      }

      document.getElementById('resultsContainer').innerHTML = html;

      hideAllScreens();
      document.getElementById('resultsScreen').classList.remove('hidden');
    }

    // Event listeners
    document.getElementById('autoModeBtn').addEventListener('click', switchToAutoMode);
    document.getElementById('manualModeBtn').addEventListener('click', switchToManualSearch);
    document.getElementById('autoAnalyzeBtn').addEventListener('click', performAutoAnalysis);
    document.getElementById('manualAnalyzeBtn').addEventListener('click', performManualAnalysis);
    document.getElementById('autoBackBtn').addEventListener('click', switchToAutoMode);
    document.getElementById('manualBackBtn').addEventListener('click', switchToManualSearch);
    document.getElementById('backFromSearchBtn').addEventListener('click', switchToAutoMode);
    document.getElementById('changePlantBtn').addEventListener('click', switchToManualSearch);
    document.getElementById('newAnalysisBtn').addEventListener('click', switchToAutoMode);
    document.getElementById('plantSearchInput').addEventListener('input', handlePlantSearch);

    // Bridge connection
    const bridgeBtn = document.getElementById('bridgeBtn');
    function checkBridgeConnection() {
      fetch('http://localhost:3000/api/status')
        .then(r => r.json())
        .then(data => {
          if (data.connected) {
            bridgeBtn.classList.add('connected');
            bridgeBtn.textContent = 'ğŸŸ¢ Ø¬Ø³Ø± Ù…ØªØµÙ„';
          }
        })
        .catch(() => {
          bridgeBtn.classList.remove('connected');
          bridgeBtn.textContent = 'ğŸ”´ Ø¬Ø³Ø± ØºÙŠØ± Ù…ØªØµÙ„';
        });
    }

    checkBridgeConnection();
    setInterval(checkBridgeConnection, 2000);
  </script>
</body>
</html>