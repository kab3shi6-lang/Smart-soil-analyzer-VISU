<!DOCTYPE html>
<html lang="ar" dir="rtl" data-lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸŒ± Ù…Ø­Ù„Ù„ Ø§Ù„ØªØ±Ø¨Ø© Ø§Ù„Ø°ÙƒÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      color: #333;
      direction: rtl;
    }

    /* Header */
    .header {
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(10px);
      padding: 20px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 20px;
      border-radius: 0 0 20px 20px;
    }

    .logo {
      font-size: 28px;
      font-weight: bold;
      color: #667eea;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .controls {
      display: flex;
      gap: 15px;
      align-items: center;
    }

    .bridge-btn, .lang-btn {
      padding: 10px 20px;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.3s ease;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    }

    .bridge-btn:hover, .lang-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    }

    .bridge-btn.connected {
      background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
      box-shadow: 0 4px 15px rgba(72, 187, 120, 0.3);
    }

    .bridge-status {
      font-size: 12px;
      color: #666;
      margin-top: 5px;
    }

    /* Ø§Ù„Ù„ØºØ§Øª */
    .lang-menu {
      position: absolute;
      top: 100%;
      left: 0;
      background: white;
      border: 2px solid #667eea;
      border-radius: 12px;
      min-width: 200px;
      max-height: 400px;
      overflow-y: auto;
      z-index: 1000;
      display: none;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }

    .lang-menu.active {
      display: block;
    }

    .lang-option {
      padding: 12px 16px;
      cursor: pointer;
      border: none;
      background: none;
      width: 100%;
      text-align: right;
      transition: all 0.2s;
      border-bottom: 1px solid #eee;
      font-size: 14px;
    }

    .lang-option:hover {
      background: #f0f4ff;
      padding-left: 20px;
    }

    .lang-option.active {
      background: #667eea;
      color: white;
      font-weight: 600;
    }

    /* Container */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    /* Ø§Ù„Ø´Ø§Ø´Ø§Øª */
    .screen {
      background: white;
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
      animation: slideIn 0.5s ease;
      display: none;
    }

    .screen.active {
      display: block;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .screen h1 {
      color: #667eea;
      margin-bottom: 30px;
      font-size: 32px;
      text-align: center;
    }

    .screen h2 {
      color: #667eea;
      margin-bottom: 20px;
      font-size: 24px;
    }

    /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
    .mode-buttons {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin: 40px 0;
    }

    .mode-btn {
      background: white;
      border: 3px solid #667eea;
      border-radius: 15px;
      padding: 30px 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      font-size: 18px;
      font-weight: 600;
    }

    .mode-btn:hover {
      background: #f0f4ff;
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);
    }

    .mode-btn span {
      font-size: 48px;
      display: block;
      margin-bottom: 15px;
    }

    /* Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ */
    .form-group {
      margin-bottom: 20px;
    }

    .form-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #333;
    }

    input[type="number"], input[type="text"], select {
      width: 100%;
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 14px;
      transition: all 0.3s ease;
    }

    input[type="number"]:focus, input[type="text"]:focus, select:focus {
      outline: none;
      border-color: #667eea;
      background: #f0f4ff;
    }

    input[type="number"].updated {
      background: #c6f6d5;
      border-color: #48bb78;
    }

    /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
    button {
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    }

    .btn-secondary {
      background: white;
      border: 2px solid #667eea;
      color: #667eea;
    }

    .btn-secondary:hover {
      background: #f0f4ff;
    }

    .btn-back {
      background: #e0e0e0;
      color: #333;
    }

    .btn-back:hover {
      background: #d0d0d0;
    }

    .button-group {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
      margin: 30px 0;
    }

    /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù†Ø¨Ø§ØªØ§Øª */
    .plants-selector {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: 12px;
      margin: 30px 0;
      max-height: 400px;
      overflow-y: auto;
      padding: 10px;
      background: #f9f9f9;
      border-radius: 12px;
    }

    .plant-option {
      background: white;
      border: 2px solid #ddd;
      border-radius: 10px;
      padding: 15px 10px;
      cursor: pointer;
      text-align: center;
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }

    .plant-option:hover {
      border-color: #667eea;
      background: #f0f4ff;
      transform: translateY(-3px);
    }

    .plant-emoji {
      font-size: 32px;
    }

    .plant-name {
      font-size: 13px;
      font-weight: 600;
      color: #333;
    }

    /* Ø§Ù„Ù†ØªØ§Ø¦Ø¬ */
    .results-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }

    .result-card {
      background: white;
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      border-left: 5px solid #667eea;
    }

    .result-card h3 {
      color: #667eea;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .quality-meter {
      background: #eee;
      border-radius: 10px;
      height: 30px;
      overflow: hidden;
      margin: 20px 0;
    }

    .quality-fill {
      height: 100%;
      background: linear-gradient(90deg, #ff6b6b 0%, #ffd93d 50%, #48bb78 100%);
      transition: width 0.5s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 600;
      font-size: 12px;
    }

    .plant-card {
      background: white;
      border-radius: 10px;
      padding: 15px;
      margin: 10px 0;
      display: flex;
      align-items: center;
      gap: 15px;
      border: 2px solid #ddd;
      transition: all 0.3s ease;
    }

    .plant-card.suitable {
      border-color: #48bb78;
      background: #f0fdf4;
    }

    .plant-card.unsuitable {
      border-color: #ef4444;
      background: #fef2f2;
    }

    .plant-card:hover {
      transform: translateX(-5px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .plant-card span:first-child {
      font-size: 28px;
    }

    .plant-card span:last-child {
      flex: 1;
      font-weight: 600;
    }

    /* Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø³Ø§Øª */
    .sensor-info {
      background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
      border-radius: 12px;
      padding: 20px;
      margin: 20px 0;
      border-left: 4px solid #667eea;
    }

    .sensor-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
      margin: 15px 0;
    }

    .sensor-item {
      background: white;
      padding: 15px;
      border-radius: 10px;
      text-align: center;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }

    .sensor-item .label {
      font-size: 12px;
      color: #666;
      margin-bottom: 5px;
    }

    .sensor-item .value {
      font-size: 20px;
      font-weight: 700;
      color: #667eea;
    }

    .sensor-item .unit {
      font-size: 11px;
      color: #999;
    }

    /* Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª */
    .alert {
      padding: 15px 20px;
      border-radius: 10px;
      margin: 20px 0;
      border-left: 4px solid;
    }

    .alert.success {
      background: #ecfdf5;
      border-color: #48bb78;
      color: #065f46;
    }

    .alert.warning {
      background: #fef3c7;
      border-color: #f59e0b;
      color: #92400e;
    }

    .alert.error {
      background: #fee2e2;
      border-color: #ef4444;
      color: #7f1d1d;
    }

    .alert.info {
      background: #eff6ff;
      border-color: #667eea;
      color: #1e3a8a;
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 30px;
      color: white;
      margin-top: 60px;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .header {
        flex-direction: column;
        align-items: flex-start;
      }

      .container {
        padding: 20px 15px;
      }

      .screen {
        padding: 20px;
      }

      .screen h1 {
        font-size: 24px;
      }

      .mode-buttons {
        grid-template-columns: 1fr;
      }

      .results-container {
        grid-template-columns: 1fr;
      }

      .plant-card {
        flex-direction: column;
        text-align: center;
      }
    }

    /* Loading */
    .loading {
      display: inline-block;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="logo">
      ğŸŒ± <span data-ar="Ù…Ø­Ù„Ù„ Ø§Ù„ØªØ±Ø¨Ø© Ø§Ù„Ø°ÙƒÙŠ" data-en="Smart Soil Analyzer">Ù…Ø­Ù„Ù„ Ø§Ù„ØªØ±Ø¨Ø© Ø§Ù„Ø°ÙƒÙŠ</span>
    </div>
    <div class="controls">
      <div style="position: relative;">
        <button class="lang-btn" id="langBtn" onclick="toggleLangMenu()">
          ğŸŒ <span id="langText">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</span>
        </button>
        <div class="lang-menu" id="langMenu"></div>
      </div>
      <div>
        <button class="bridge-btn" id="bridgeBtn" onclick="connectBridge()">
          ğŸ”´ <span data-ar="ØºÙŠØ± Ù…ØªØµÙ„" data-en="Not Connected">ØºÙŠØ± Ù…ØªØµÙ„</span>
        </button>
        <div class="bridge-status" id="bridgeStatus"></div>
      </div>
    </div>
  </header>

  <!-- Main -->
  <div class="container">
    <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© -->
    <div class="screen active" id="homeScreen">
      <h1>ğŸŒ± <span data-ar="Ù…Ø­Ù„Ù„ Ø§Ù„ØªØ±Ø¨Ø© Ø§Ù„Ø°ÙƒÙŠ" data-en="Smart Soil Analyzer">Ù…Ø­Ù„Ù„ Ø§Ù„ØªØ±Ø¨Ø© Ø§Ù„Ø°ÙƒÙŠ</span></h1>
      <p style="text-align: center; font-size: 18px; color: #666; margin: 20px 0;" data-ar="Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©" data-en="Choose your analysis method">Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©</p>

      <div class="mode-buttons">
        <button class="mode-btn" onclick="goToScreen('autoScreen')">
          <span>ğŸ¤–</span>
          <span data-ar="Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ" data-en="Automatic Analysis">Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</span>
          <small style="display: block; font-size: 12px; margin-top: 10px; color: #666;" data-ar="ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªØ±Ø¨Ø© ÙˆØ§Ø®ØªÙŠØ§Ø± Ø£ÙØ¶Ù„ Ø§Ù„Ù†Ø¨Ø§ØªØ§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹" data-en="Analyze soil and auto-select best plants">ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªØ±Ø¨Ø© ÙˆØ§Ø®ØªÙŠØ§Ø± Ø£ÙØ¶Ù„ Ø§Ù„Ù†Ø¨Ø§ØªØ§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</small>
        </button>

        <button class="mode-btn" onclick="goToScreen('manualScreen')">
          <span>ğŸŒ¿</span>
          <span data-ar="Ø§Ø®ØªÙŠØ§Ø± ÙŠØ¯ÙˆÙŠ" data-en="Manual Selection">Ø§Ø®ØªÙŠØ§Ø± ÙŠØ¯ÙˆÙŠ</span>
          <small style="display: block; font-size: 12px; margin-top: 10px; color: #666;" data-ar="Ø§Ø®ØªØ± Ù†Ø¨Ø§Øª ÙˆØªØ­Ù‚Ù‚ Ù…Ù† ØªÙˆØ§ÙÙ‚ Ø§Ù„ØªØ±Ø¨Ø©" data-en="Choose a plant and check soil compatibility">Ø§Ø®ØªØ± Ù†Ø¨Ø§Øª ÙˆØªØ­Ù‚Ù‚ Ù…Ù† ØªÙˆØ§ÙÙ‚ Ø§Ù„ØªØ±Ø¨Ø©</small>
        </button>

        <button class="mode-btn" onclick="goToScreen('sensorScreen')">
          <span>ğŸ“Š</span>
          <span data-ar="Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø³Ø§Øª" data-en="Sensor Data">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø³Ø§Øª</span>
          <small style="display: block; font-size: 12px; margin-top: 10px; color: #666;" data-ar="Ø§Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­ÙŠØ© Ù…Ù† Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©" data-en="View live sensor data">Ø§Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­ÙŠØ© Ù…Ù† Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©</small>
        </button>
      </div>
    </div>

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ -->
    <div class="screen" id="autoScreen">
      <h2 data-ar="Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ" data-en="Automatic Analysis">Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</h2>
      <p style="color: #666; margin: 15px 0;" data-ar="Ø£Ø¯Ø®Ù„ Ù‚ÙŠÙ… Ø§Ù„ØªØ±Ø¨Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©" data-en="Enter your soil values">Ø£Ø¯Ø®Ù„ Ù‚ÙŠÙ… Ø§Ù„ØªØ±Ø¨Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©</p>

      <div class="form-row">
        <div class="form-group">
          <label data-ar="Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø© (Â°C)" data-en="Temperature (Â°C)">Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø© (Â°C)</label>
          <input type="number" id="autoTemp" step="0.1" placeholder="22">
        </div>
        <div class="form-group">
          <label data-ar="Ø§Ù„Ø±Ø·ÙˆØ¨Ø© (%)" data-en="Moisture (%)">Ø§Ù„Ø±Ø·ÙˆØ¨Ø© (%)</label>
          <input type="number" id="autoMoisture" step="0.1" placeholder="65">
        </div>
        <div class="form-group">
          <label data-ar="Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‡ÙŠØ¯Ø±ÙˆØ¬ÙŠÙ†ÙŠ (pH)" data-en="pH Level">Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‡ÙŠØ¯Ø±ÙˆØ¬ÙŠÙ†ÙŠ (pH)</label>
          <input type="number" id="autoPH" step="0.1" placeholder="6.5">
        </div>
        <div class="form-group">
          <label data-ar="Ø§Ù„Ù†ÙŠØªØ±ÙˆØ¬ÙŠÙ† (N)" data-en="Nitrogen (N)">Ø§Ù„Ù†ÙŠØªØ±ÙˆØ¬ÙŠÙ† (N)</label>
          <input type="number" id="autoN" placeholder="50">
        </div>
        <div class="form-group">
          <label data-ar="Ø§Ù„ÙØ³ÙÙˆØ± (P)" data-en="Phosphorus (P)">Ø§Ù„ÙØ³ÙÙˆØ± (P)</label>
          <input type="number" id="autoP" placeholder="40">
        </div>
        <div class="form-group">
          <label data-ar="Ø§Ù„Ø¨ÙˆØªØ§Ø³ÙŠÙˆÙ… (K)" data-en="Potassium (K)">Ø§Ù„Ø¨ÙˆØªØ§Ø³ÙŠÙˆÙ… (K)</label>
          <input type="number" id="autoK" placeholder="45">
        </div>
      </div>

      <div class="button-group">
        <button class="btn-primary" onclick="analyzeAuto()" data-ar="ØªØ­Ù„ÙŠÙ„" data-en="Analyze">ØªØ­Ù„ÙŠÙ„</button>
        <button class="btn-secondary" onclick="fillAutoExamples()" data-ar="Ù…Ù„Ø¡ Ø£Ù…Ø«Ù„Ø©" data-en="Fill Examples">Ù…Ù„Ø¡ Ø£Ù…Ø«Ù„Ø©</button>
        <button class="btn-back" onclick="goToScreen('homeScreen')" data-ar="Ø±Ø¬ÙˆØ¹" data-en="Back">Ø±Ø¬ÙˆØ¹</button>
      </div>

      <div id="autoResults"></div>
    </div>

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙŠØ¯ÙˆÙŠ -->
    <div class="screen" id="manualScreen">
      <h2 data-ar="Ø§Ø®ØªÙŠØ§Ø± ÙŠØ¯ÙˆÙŠ" data-en="Manual Selection">Ø§Ø®ØªÙŠØ§Ø± ÙŠØ¯ÙˆÙŠ</h2>

      <h3 data-ar="Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ±Ø¨Ø©" data-en="Soil Data">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ±Ø¨Ø©</h3>
      <div class="form-row">
        <div class="form-group">
          <label data-ar="Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø© (Â°C)" data-en="Temperature (Â°C)">Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø© (Â°C)</label>
          <input type="number" id="manualTemp" step="0.1" placeholder="22">
        </div>
        <div class="form-group">
          <label data-ar="Ø§Ù„Ø±Ø·ÙˆØ¨Ø© (%)" data-en="Moisture (%)">Ø§Ù„Ø±Ø·ÙˆØ¨Ø© (%)</label>
          <input type="number" id="manualMoisture" step="0.1" placeholder="65">
        </div>
        <div class="form-group">
          <label data-ar="Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‡ÙŠØ¯Ø±ÙˆØ¬ÙŠÙ†ÙŠ (pH)" data-en="pH Level">Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‡ÙŠØ¯Ø±ÙˆØ¬ÙŠÙ†ÙŠ (pH)</label>
          <input type="number" id="manualPH" step="0.1" placeholder="6.5">
        </div>
        <div class="form-group">
          <label data-ar="Ø§Ù„Ù†ÙŠØªØ±ÙˆØ¬ÙŠÙ† (N)" data-en="Nitrogen (N)">Ø§Ù„Ù†ÙŠØªØ±ÙˆØ¬ÙŠÙ† (N)</label>
          <input type="number" id="manualN" placeholder="50">
        </div>
        <div class="form-group">
          <label data-ar="Ø§Ù„ÙØ³ÙÙˆØ± (P)" data-en="Phosphorus (P)">Ø§Ù„ÙØ³ÙÙˆØ± (P)</label>
          <input type="number" id="manualP" placeholder="40">
        </div>
        <div class="form-group">
          <label data-ar="Ø§Ù„Ø¨ÙˆØªØ§Ø³ÙŠÙˆÙ… (K)" data-en="Potassium (K)">Ø§Ù„Ø¨ÙˆØªØ§Ø³ÙŠÙˆÙ… (K)</label>
          <input type="number" id="manualK" placeholder="45">
        </div>
      </div>

      <h3 data-ar="Ø§Ø®ØªØ± Ø§Ù„Ù†Ø¨Ø§Øª" data-en="Choose Plant">Ø§Ø®ØªØ± Ø§Ù„Ù†Ø¨Ø§Øª</h3>
      <input type="text" id="plantSearch" placeholder="Ø§Ø¨Ø­Ø«..." style="width: 100%; margin-bottom: 15px;">
      <div class="plants-selector" id="plantsContainer"></div>

      <div class="button-group">
        <button class="btn-back" onclick="goToScreen('homeScreen')" data-ar="Ø±Ø¬ÙˆØ¹" data-en="Back">Ø±Ø¬ÙˆØ¹</button>
      </div>

      <div id="manualResults"></div>
    </div>

    <!-- Ø´Ø§Ø´Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø³Ø§Øª -->
    <div class="screen" id="sensorScreen">
      <h2 data-ar="Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø³Ø§Øª" data-en="Sensor Data">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø³Ø§Øª</h2>

      <div class="alert info">
        <strong data-ar="Ù…Ù„Ø§Ø­Ø¸Ø©:" data-en="Note:">Ù…Ù„Ø§Ø­Ø¸Ø©:</strong>
        <span data-ar="ØªØ£ÙƒØ¯ Ù…Ù† Ø§ØªØµØ§Ù„ Ø¬Ø³Ø± Ø§Ù„Ø¨Ù„ÙˆØªÙˆØ« Ø£ÙˆÙ„Ø§Ù‹" data-en="Make sure bridge is connected first">ØªØ£ÙƒØ¯ Ù…Ù† Ø§ØªØµØ§Ù„ Ø¬Ø³Ø± Ø§Ù„Ø¨Ù„ÙˆØªÙˆØ« Ø£ÙˆÙ„Ø§Ù‹</span>
      </div>

      <div class="sensor-info">
        <h3 data-ar="Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­ÙŠØ© Ù…Ù† Arduino" data-en="Live Data from Arduino">Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­ÙŠØ© Ù…Ù† Arduino</h3>
        <div class="sensor-grid">
          <div class="sensor-item">
            <div class="label">ğŸŒ¡ï¸ <span data-ar="Ø§Ù„Ø­Ø±Ø§Ø±Ø©" data-en="Temperature">Ø§Ù„Ø­Ø±Ø§Ø±Ø©</span></div>
            <div class="value" id="sensorTemp">--</div>
            <div class="unit">Â°C</div>
          </div>
          <div class="sensor-item">
            <div class="label">ğŸ’§ <span data-ar="Ø§Ù„Ø±Ø·ÙˆØ¨Ø©" data-en="Moisture">Ø§Ù„Ø±Ø·ÙˆØ¨Ø©</span></div>
            <div class="value" id="sensorMoisture">--</div>
            <div class="unit">%</div>
          </div>
          <div class="sensor-item">
            <div class="label">âš—ï¸ <span data-ar="Ø§Ù„Ø­Ù…ÙˆØ¶Ø©" data-en="pH">Ø§Ù„Ø­Ù…ÙˆØ¶Ø©</span></div>
            <div class="value" id="sensorPH">--</div>
            <div class="unit">pH</div>
          </div>
          <div class="sensor-item">
            <div class="label">ğŸŸ¢ <span data-ar="Ø§Ù„Ù†ÙŠØªØ±ÙˆØ¬ÙŠÙ†" data-en="Nitrogen">Ø§Ù„Ù†ÙŠØªØ±ÙˆØ¬ÙŠÙ†</span></div>
            <div class="value" id="sensorN">--</div>
            <div class="unit">N</div>
          </div>
          <div class="sensor-item">
            <div class="label">ğŸ”µ <span data-ar="Ø§Ù„ÙØ³ÙÙˆØ±" data-en="Phosphorus">Ø§Ù„ÙØ³ÙÙˆØ±</span></div>
            <div class="value" id="sensorP">--</div>
            <div class="unit">P</div>
          </div>
          <div class="sensor-item">
            <div class="label">ğŸŸ£ <span data-ar="Ø§Ù„Ø¨ÙˆØªØ§Ø³ÙŠÙˆÙ…" data-en="Potassium">Ø§Ù„Ø¨ÙˆØªØ§Ø³ÙŠÙˆÙ…</span></div>
            <div class="value" id="sensorK">--</div>
            <div class="unit">K</div>
          </div>
        </div>
      </div>

      <div class="button-group">
        <button class="btn-primary" onclick="refreshSensorData()" data-ar="ØªØ­Ø¯ÙŠØ«" data-en="Refresh">ØªØ­Ø¯ÙŠØ«</button>
        <button class="btn-back" onclick="goToScreen('homeScreen')" data-ar="Ø±Ø¬ÙˆØ¹" data-en="Back">Ø±Ø¬ÙˆØ¹</button>
      </div>

      <div id="sensorResults"></div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <p data-ar="Ù…Ø­Ù„Ù„ Ø§Ù„ØªØ±Ø¨Ø© Ø§Ù„Ø°ÙƒÙŠ Â© 2024 | ØªÙ… ØªØ·ÙˆÙŠØ±Ù‡ Ø¨Ù€ â¤ï¸" data-en="Smart Soil Analyzer Â© 2024 | Made with â¤ï¸">Ù…Ø­Ù„Ù„ Ø§Ù„ØªØ±Ø¨Ø© Ø§Ù„Ø°ÙƒÙŠ Â© 2024 | ØªÙ… ØªØ·ÙˆÙŠØ±Ù‡ Ø¨Ù€ â¤ï¸</p>
  </footer>

  <!-- Scripts -->
  <script src="plants-db.js"></script>
  <script src="ai-advanced.js"></script>
  <script>
    // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
    let currentLanguage = 'ar';
    let bridgeConnected = false;
    let sensorData = {};

    // Ø§Ù„Ù„ØºØ§Øª
    const languages = {
      ar: { name: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©', flag: 'ğŸ‡¸ğŸ‡¦' },
      en: { name: 'English', flag: 'ğŸ‡ºğŸ‡¸' },
      fr: { name: 'FranÃ§ais', flag: 'ğŸ‡«ğŸ‡·' },
      es: { name: 'EspaÃ±ol', flag: 'ğŸ‡ªğŸ‡¸' },
      de: { name: 'Deutsch', flag: 'ğŸ‡©ğŸ‡ª' },
      zh: { name: 'ä¸­æ–‡', flag: 'ğŸ‡¨ğŸ‡³' },
      ja: { name: 'æ—¥æœ¬èª', flag: 'ğŸ‡¯ğŸ‡µ' },
      hi: { name: 'à¤¹à¤¿à¤¨à¥à¤¦à¥€', flag: 'ğŸ‡®ğŸ‡³' },
      tr: { name: 'TÃ¼rkÃ§e', flag: 'ğŸ‡¹ğŸ‡·' },
      pt: { name: 'PortuguÃªs', flag: 'ğŸ‡§ğŸ‡·' }
    };

    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù„ØºØ§Øª
    function initLanguages() {
      const langMenu = document.getElementById('langMenu');
      Object.entries(languages).forEach(([code, lang]) => {
        const btn = document.createElement('button');
        btn.className = `lang-option ${code === 'ar' ? 'active' : ''}`;
        btn.textContent = `${lang.flag} ${lang.name}`;
        btn.onclick = () => switchLanguage(code);
        langMenu.appendChild(btn);
      });
    }

    // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ©
    function switchLanguage(lang) {
      currentLanguage = lang;
      document.documentElement.lang = lang;
      document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
      document.getElementById('langText').textContent = languages[lang].name;
      
      // ØªØ­Ø¯ÙŠØ« Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù†ØµÙˆØµ
      updateTexts();
      
      // ØªØ­Ø¯ÙŠØ« Ø²Ø± Ø§Ù„Ù„ØºØ©
      document.querySelectorAll('.lang-option').forEach(btn => {
        btn.classList.toggle('active', btn.textContent.includes(languages[lang].name));
      });
    }

    function toggleLangMenu() {
      document.getElementById('langMenu').classList.toggle('active');
    }

    // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø´Ø§Ø´Ø§Øª
    function goToScreen(screenId) {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById(screenId).classList.add('active');
      window.scrollTo(0, 0);
    }

    // Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
    function analyzeAuto() {
      const data = {
        temp: parseFloat(document.getElementById('autoTemp').value),
        moisture: parseFloat(document.getElementById('autoMoisture').value),
        ph: parseFloat(document.getElementById('autoPH').value),
        n: parseFloat(document.getElementById('autoN').value),
        p: parseFloat(document.getElementById('autoP').value),
        k: parseFloat(document.getElementById('autoK').value)
      };

      if (Object.values(data).some(v => isNaN(v))) {
        alert(currentLanguage === 'ar' ? 'ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„' : 'Please fill all fields');
        return;
      }

      const suitable = plantsDB.plants.filter(p => checkCompatibility(p, data));
      const unsuitable = plantsDB.plants.filter(p => !checkCompatibility(p, data));

      let html = `
        <div class="alert success">
          <strong>${currentLanguage === 'ar' ? 'âœ… ØªÙ… Ø§Ù„ØªØ­Ù„ÙŠÙ„' : 'âœ… Analysis Complete'}</strong>
          ${currentLanguage === 'ar' ? `<br>ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ${suitable.length} Ù†Ø¨Ø§Øª Ù…Ù†Ø§Ø³Ø¨` : `<br>Found ${suitable.length} suitable plants`}
        </div>
        <h3>${currentLanguage === 'ar' ? 'ğŸŒ¿ Ø§Ù„Ù†Ø¨Ø§ØªØ§Øª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©' : 'ğŸŒ¿ Suitable Plants'}</h3>
        <div class="results-container">
      `;

      suitable.slice(0, 20).forEach(p => {
        html += `<div class="plant-card suitable"><span class="plant-emoji">${p.emoji}</span><span class="plant-name">${currentLanguage === 'ar' ? p.nameAr : p.nameEn}</span></div>`;
      });

      html += `</div>`;
      document.getElementById('autoResults').innerHTML = html;
    }

    // Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙŠØ¯ÙˆÙŠ
    function initPlants() {
      const container = document.getElementById('plantsContainer');
      const search = document.getElementById('plantSearch');

      function render(plants) {
        container.innerHTML = '';
        plants.slice(0, 100).forEach(p => {
          const btn = document.createElement('button');
          btn.className = 'plant-option';
          btn.innerHTML = `<span class="plant-emoji">${p.emoji}</span><span class="plant-name">${currentLanguage === 'ar' ? p.nameAr : p.nameEn}</span>`;
          btn.onclick = () => selectPlant(p);
          container.appendChild(btn);
        });
      }

      render(plantsDB.plants);

      search.addEventListener('input', (e) => {
        const filtered = plantsDB.searchPlants(e.target.value);
        render(filtered);
      });
    }

    function selectPlant(plant) {
      const data = {
        temp: parseFloat(document.getElementById('manualTemp').value),
        moisture: parseFloat(document.getElementById('manualMoisture').value),
        ph: parseFloat(document.getElementById('manualPH').value),
        n: parseFloat(document.getElementById('manualN').value),
        p: parseFloat(document.getElementById('manualP').value),
        k: parseFloat(document.getElementById('manualK').value)
      };

      if (Object.values(data).some(v => isNaN(v))) {
        alert(currentLanguage === 'ar' ? 'ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ±Ø¨Ø©' : 'Please fill soil data');
        return;
      }

      const compatible = checkCompatibility(plant, data);
      const analysis = aiAnalyzer.analyze(plant, data);

      let html = `
        <div class="result-card">
          <h3>${plant.emoji} ${currentLanguage === 'ar' ? plant.nameAr : plant.nameEn}</h3>
          <div class="quality-meter">
            <div class="quality-fill" style="width: ${analysis.score}%">${analysis.score}%</div>
          </div>
      `;

      if (compatible) {
        html += `<div class="alert success"><strong>âœ… ${currentLanguage === 'ar' ? 'Ø§Ù„ØªØ±Ø¨Ø© Ù…Ù†Ø§Ø³Ø¨Ø© ØªÙ…Ø§Ù…Ø§Ù‹!' : 'Soil is perfect!'}</strong></div>`;
      } else {
        html += `<div class="alert warning"><strong>âš ï¸ ${currentLanguage === 'ar' ? 'Ø§Ù„ØªØ±Ø¨Ø© Ø¨Ø­Ø§Ø¬Ø© ØªØ­Ø³ÙŠÙ†' : 'Soil needs improvement'}</strong></div>`;
        
        // Ø§Ù„Ù†Ù‚Ø§Ø¦Øµ ÙˆØ§Ù„Ø­Ù„ÙˆÙ„
        if (analysis.deficiencies.length > 0) {
          html += `<h4>${currentLanguage === 'ar' ? 'ğŸ”´ Ø§Ù„Ù†Ù‚Ø§Ø¦Øµ:' : 'ğŸ”´ Deficiencies:'}</h4>`;
          analysis.deficiencies.forEach(d => {
            html += `<div class="alert error">
              <strong>${d.name}</strong><br>
              ${d.description}<br>
              ${currentLanguage === 'ar' ? `Ø§Ù„Ø­Ù„: ${d.solution} (${d.amount}g)` : `Solution: ${d.solution} (${d.amount}g)`}<br>
              ${currentLanguage === 'ar' ? `Ø§Ù„Ù…Ø¯Ø©: ${d.days} ÙŠÙˆÙ…` : `Duration: ${d.days} days`}
            </div>`;
          });
        }
      }

      html += `</div>`;
      document.getElementById('manualResults').innerHTML = html;
    }

    // Ø§ØªØµØ§Ù„ Ø§Ù„Ø¬Ø³Ø±
    function connectBridge() {
      bridgeConnected = !bridgeConnected;
      const btn = document.getElementById('bridgeBtn');
      const status = document.getElementById('bridgeStatus');

      if (bridgeConnected) {
        btn.classList.add('connected');
        btn.innerHTML = 'ğŸŸ¢ Ù…ØªØµÙ„';
        status.textContent = 'âœ… Ø¬Ø³Ø± Bluetooth Ù†Ø´Ø·';
        startListeningToSensors();
      } else {
        btn.classList.remove('connected');
        btn.innerHTML = 'ğŸ”´ ØºÙŠØ± Ù…ØªØµÙ„';
        status.textContent = 'âŒ ØºÙŠØ± Ù…ØªØµÙ„';
      }
    }

    function startListeningToSensors() {
      // Ù…Ø­Ø§ÙƒØ§Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø³Ø§Øª
      setInterval(() => {
        if (bridgeConnected) {
          sensorData = {
            temp: (Math.random() * 30 + 10).toFixed(1),
            moisture: (Math.random() * 80 + 20).toFixed(1),
            ph: (Math.random() * 4 + 5.5).toFixed(1),
            n: (Math.random() * 80 + 20).toFixed(0),
            p: (Math.random() * 60 + 20).toFixed(0),
            k: (Math.random() * 70 + 20).toFixed(0)
          };
          updateSensorDisplay();
        }
      }, 2000);
    }

    function updateSensorDisplay() {
      document.getElementById('sensorTemp').textContent = sensorData.temp;
      document.getElementById('sensorMoisture').textContent = sensorData.moisture;
      document.getElementById('sensorPH').textContent = sensorData.ph;
      document.getElementById('sensorN').textContent = sensorData.n;
      document.getElementById('sensorP').textContent = sensorData.p;
      document.getElementById('sensorK').textContent = sensorData.k;
    }

    function refreshSensorData() {
      if (!bridgeConnected) {
        alert(currentLanguage === 'ar' ? 'ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¬Ø³Ø± Ø£ÙˆÙ„Ø§Ù‹' : 'Please connect to bridge first');
        return;
      }
      updateSensorDisplay();
    }

    // Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø©
    function checkCompatibility(plant, soil) {
      return soil.temp >= plant.tempMin && soil.temp <= plant.tempMax &&
             soil.moisture >= plant.moistureMin && soil.moisture <= plant.moistureMax &&
             soil.ph >= plant.phMin && soil.ph <= plant.phMax &&
             soil.n >= plant.nMin && soil.p >= plant.pMin && soil.k >= plant.kMin;
    }

    function fillAutoExamples() {
      document.getElementById('autoTemp').value = '22';
      document.getElementById('autoMoisture').value = '70';
      document.getElementById('autoPH').value = '6.5';
      document.getElementById('autoN').value = '50';
      document.getElementById('autoP').value = '40';
      document.getElementById('autoK').value = '45';
    }

    function updateTexts() {
      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØµÙˆØµ Ø­Ø³Ø¨ Ø§Ù„Ù„ØºØ©
      document.querySelectorAll('[data-ar]').forEach(el => {
        el.textContent = currentLanguage === 'ar' ? el.getAttribute('data-ar') : el.getAttribute('data-en') || el.getAttribute('data-ar');
      });
    }

    // Ø§Ù„ØªÙ‡ÙŠØ¦Ø©
    window.addEventListener('load', () => {
      initLanguages();
      initPlants();
    });
  </script>
</body>
</html>
